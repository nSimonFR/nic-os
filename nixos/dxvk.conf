# DXVK Configuration for Star Citizen
# Place this file as "dxvk.conf" in your Star Citizen game directory
# or Wine prefix: ~/.wine/drive_c/users/<username>/Documents/StarCitizen/LIVE/

# === Critical Fixes for Freezing ===

# Force FIFO present mode to fix swapchain freezing on NVIDIA + Wayland
dxvk.presentMode = fifo

# Enable state cache to reduce shader compilation stuttering
dxvk.enableStateCache = True
dxvk.numCompilerThreads = 0  # 0 = auto-detect based on CPU cores

# === NVIDIA-specific Optimizations ===

# Disable NVAPI hacks that can cause issues
dxvk.enableNvapihack = False

# Use optimal memory allocator for NVIDIA
dxvk.useDeviceLocal = True

# === Multi-Monitor Fixes ===

# Strict ordering helps with multi-monitor presentation
dxvk.strictDrawOrdering = True

# Filter duplicate modes to prevent resolution confusion
dxvk.filterDuplicateModes = True

# === Performance Optimizations ===

# Maximum frame latency (lower = more responsive, higher = more throughput)
dxvk.maxFrameLatency = 1

# Enable async pipeline compilation
dxvk.useAsyncPipelineCompiler = True

# Maximum memory budget for DXVK (MB) - adjust based on your VRAM
# Leave commented to auto-detect
# dxvk.maxDeviceMemory = 12288

# Maximum shared memory (MB)
# dxvk.maxSharedMemory = 256

# === Debugging (Disable in Production) ===

# Uncomment to show FPS overlay
# dxvk.hud = fps

# Uncomment to enable verbose logging
# dxvk.logLevel = info

# === Game-Specific Tweaks ===

# Disable graphics pipeline library (can cause issues on some setups)
# dxvk.enableGraphicsPipelineLibrary = False

# Force sample rate shading (improves image quality but reduces FPS)
# dxvk.forceSampleRateShading = True

# === Notes ===
# - This file should be in the same directory as the game executable
# - Alternatively, set DXVK_CONFIG_FILE env var to point to this file
# - Changes take effect on next game launch
# - Monitor DXVK logs in: /tmp/ or game directory


